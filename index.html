<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŒ—æµ·é“å…­æ—¥éŠ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700;900&family=Noto+Sans+JP:wght@400;700&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f1f5f9; }
        .header-bg { background-image: linear-gradient(135deg, #2E4057 0%, #748DA6 100%); }
        .accent-color { color: #0ea5e9; }
        .tab-item { padding: 8px 12px; cursor: pointer; border-bottom: 3px solid transparent; font-weight: 500; transition: all 0.2s; flex-shrink: 0; display: flex; align-items: center; white-space: nowrap; border-radius: 0; font-size: 0.95rem; }
        .main-tab:hover { color: #0ea5e9; border-bottom-color: #0ea5e9; }
        .main-tab.active { border-bottom-color: #0ea5e9; color: #0ea5e9; font-weight: 700; background-color: transparent; }
        .day-tab { color: #64748b; background-color: transparent; }
        .day-tab:hover { color: #0284c7; background-color: #f8fafc; }
        .day-tab.active { border-bottom-color: #0284c7; color: #0284c7; font-weight: 700; background-color: #f0f9ff; }
        .content-area { animation: fadeIn 0.4s ease-in-out; min-height: 500px; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        #location-modal { transition: opacity 0.2s ease-in-out; }
        #location-modal.hidden { opacity: 0; pointer-events: none; }
        #location-modal:not(.hidden) { opacity: 1; pointer-events: auto; }
        .timeline-col { position: relative; display: flex; flex-direction: column; align-items: center; width: 3rem; flex-shrink: 0; }
        .timeline-line-solid { position: absolute; top: 0; bottom: -3rem; left: 50%; width: 2px; transform: translateX(-50%); background-color: #cbd5e1; z-index: 0; }
        .timeline-line-dashed { position: absolute; top: 0; bottom: -3rem; left: 50%; width: 0; transform: translateX(-50%); border-left: 2px dashed #94a3b8; z-index: 0; }
        .first-item .timeline-line-solid, .first-item .timeline-line-dashed { top: 1.5rem; }
        .last-item .timeline-line-solid, .last-item .timeline-line-dashed { bottom: auto; height: 1.5rem; }
        input[type=number]::-webkit-inner-spin-button, input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
        input[type=number] { -moz-appearance: textfield; }
        .checklist-item { cursor: pointer; transition: all 0.2s; }
        .checklist-item:hover { background-color: #f0f9ff; }
        .checklist-checkbox { accent-color: #00A8A0; width: 1.25rem; height: 1.25rem; }
        .checked-text { text-decoration: line-through; color: #9ca3af; opacity: 0.7; }
        .highlight-text-clickable { font-weight: 700; color: #0284c7; background-color: #e0f2fe; padding: 0 2px; border-radius: 2px; cursor: pointer; text-decoration: underline; }
        
        /* éš±è—æ²è»¸ä½†ä¿æŒåŠŸèƒ½ */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="min-h-screen">
    <div id="app" class="max-w-4xl mx-auto bg-gray-50 shadow-2xl relative min-h-screen">
        <!-- Modal -->
        <div id="location-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm hidden p-4">
            <div class="bg-white rounded-2xl shadow-2xl max-w-sm w-full p-6 relative transform transition-all scale-100 border border-gray-100">
                <button onclick="closeModal()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 bg-gray-100 rounded-full p-1"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg></button>
                <div class="mb-5 border-b border-gray-100 pb-4 pr-8">
                    <h3 id="modal-title" class="text-2xl font-bold text-gray-800 leading-tight"></h3>
                    <p id="modal-jp-name" class="text-sm text-sky-600 font-medium font-['Noto_Sans_JP'] mt-1">Japanese Name</p>
                    
                    <div id="modal-desc-wrapper" class="mt-3 hidden bg-slate-50 p-3 rounded-lg border border-slate-100">
                        <p id="modal-desc" class="text-sm text-gray-700 leading-relaxed whitespace-pre-line"></p>
                    </div>
                </div>
                
                <div class="space-y-4">
                    <div id="modal-address-row" class="flex items-start"><span class="text-xl mr-3 mt-0.5 text-gray-400">ğŸ“</span><div><p class="text-xs font-bold text-gray-400 uppercase tracking-wide">åœ°å€</p><p id="modal-address" class="text-gray-700 text-sm leading-relaxed font-medium">åœ°å€è¼‰å…¥ä¸­...</p></div></div>
                    <div id="modal-hours-row" class="flex items-start"><span class="text-xl mr-3 mt-0.5 text-gray-400">ğŸ•’</span><div><p class="text-xs font-bold text-gray-400 uppercase tracking-wide">ç‡Ÿæ¥­æ™‚é–“</p><p id="modal-hours" class="text-gray-700 text-sm leading-relaxed font-medium">ç‡Ÿæ¥­æ™‚é–“è¼‰å…¥ä¸­...</p></div></div>
                    
                    <div id="modal-ticket-row" class="flex items-start hidden"><span class="text-xl mr-3 mt-0.5 text-gray-400">ğŸ«</span><div><p class="text-xs font-bold text-gray-400 uppercase tracking-wide">è²»ç”¨ / ç¥¨åƒ¹</p><p id="modal-ticket" class="text-orange-600 text-sm leading-relaxed font-bold">ç„¡è³‡è¨Š</p></div></div>
                    <div id="modal-aircraft-row" class="flex items-start hidden"><span class="text-xl mr-3 mt-0.5 text-gray-400">âœˆï¸</span><div><p class="text-xs font-bold text-gray-400 uppercase tracking-wide">æ©Ÿå‹</p><p id="modal-aircraft" class="text-slate-600 text-sm leading-relaxed font-bold">è¼‰å…¥ä¸­...</p></div></div>
                </div>
                
                <div id="modal-map-btn-container" class="mt-6 pt-4 border-t border-gray-100">
                    <button id="modal-map-btn" class="w-full bg-sky-600 text-white py-3 rounded-xl font-bold hover:bg-sky-700 transition flex items-center justify-center shadow-lg shadow-sky-200">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" /></svg>é–‹å•Ÿ Google Maps
                    </button>
                </div>
            </div>
        </div>
        <!-- Banner -->
        <header class="header-bg p-6 sm:p-10 text-white text-center rounded-b-xl relative shadow-md z-0">
            <h1 id="header-title" class="text-3xl sm:text-4xl font-extrabold opacity-95 mb-2">æ—…ç¨‹è¼‰å…¥ä¸­...</h1>
            <p id="header-subtitle" class="text-sm font-light tracking-widest">è¼‰å…¥ä¸­...</p>
        </header>
        
        <!-- Nav (Sticky Container) -->
        <div class="sticky top-0 z-40 mx-4 -mt-6 transition-all duration-300">
            <div class="bg-white/95 backdrop-blur-md rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
                 <div id="main-tabs" class="flex overflow-x-auto whitespace-nowrap border-b border-gray-100 no-scrollbar"></div>
                 <div id="day-tabs" class="hidden overflow-x-auto whitespace-nowrap bg-slate-50/50 no-scrollbar"></div>
            </div>
        </div>

        <!-- Content -->
        <div id="dynamic-content" class="content-area px-4 pb-12 pt-6"><div class="text-center text-gray-500 py-16">è¼‰å…¥ä¸­...</div></div>
        <footer class="text-center text-gray-400 text-xs py-6"><p>Designed for your trip.</p></footer>
    </div>

    <script>
        const FALLBACK_RATE = 0.20; 
        let currentExchangeRate = FALLBACK_RATE; 
        let activeMainTab = 'home'; 
        let activeDayId = 'day-1';

        // --- Utility Functions ---

        function toggleCheck(id) {
            const checkbox = document.getElementById(id);
            const text = document.getElementById(`text-${id}`);
            if (checkbox && text) {
                checkbox.checked = !checkbox.checked;
                if (checkbox.checked) {
                    text.classList.add('checked-text');
                } else {
                    text.classList.remove('checked-text');
                }
            }
        }

        function getStyleByType(type) {
            const styles = {
                "flight": { isTraffic: true, iconName: "flight", bgColor: "bg-white border-2 border-slate-300", iconColor: "text-slate-500" },
                "transport": { isTraffic: true, iconName: "transport", bgColor: "bg-white border-2 border-slate-300", iconColor: "text-slate-500" },
                "walking": { isTraffic: true, iconName: "walking", bgColor: "bg-white border-2 border-slate-300", iconColor: "text-slate-500" },
                "subway": { isTraffic: true, iconName: "subway", bgColor: "bg-white border-2 border-slate-300", iconColor: "text-slate-500" },
                "airport": { isTraffic: false, iconName: "airport", bgColor: "bg-sky-500", iconColor: "text-white" },
                "food": { isTraffic: false, iconName: "food", bgColor: "bg-orange-400", iconColor: "text-white" },
                "shopping": { isTraffic: false, iconName: "shopping", bgColor: "bg-pink-400", iconColor: "text-white" },
                "hotel": { isTraffic: false, iconName: "hotel", bgColor: "bg-indigo-400", iconColor: "text-white" },
                "sight": { isTraffic: false, iconName: "sight", bgColor: "bg-emerald-400", iconColor: "text-white" },
                "culture": { isTraffic: false, iconName: "sight", bgColor: "bg-emerald-400", iconColor: "text-white" }
            };
            return styles[type] || styles["sight"];
        }

        function getIconSvg(name, colorClass) {
            const icons = {
                "transport": `<svg class="w-3.5 h-3.5 ${colorClass}" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5"><path d="M19 14l-7 7m0 0l-7-7m7 7V3" /></svg>`, 
                "airport": `<svg class="w-4 h-4 ${colorClass}" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18.2 12.27 20 6H4l1.8 6.27a1 1 0 0 0 .95.73h10.5a1 1 0 0 0 .96-.73Z"/><path d="M8 13v9"/><path d="M16 22v-9"/><path d="m9 6 1 7"/><path d="m15 6-1 7"/><path d="M12 6V2"/><path d="M13 2h-2"/></svg>`, 
                "flight": `<svg class="w-3.5 h-3.5 ${colorClass}" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z"/></svg>`, 
                "walking": `<svg class="w-3.5 h-3.5 ${colorClass}" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 11 3.8 11 8c0 1.25-1 2-1 2s0 2.15 2 3.65c1.4 1.05 2.2 1.93 2.2 3.35 0 2.82-2.18 5-4.85 5-2.67 0-5.35-3.37-5.35-6z"/><path d="M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 13 7.8 13 12c0 1.25 1 2 1 2s0 2.15-2 3.65c-1.4 1.05-2.2 1.93-2.2 3.35 0 2.82 2.18 5 4.85 5 2.67 0 5.35-3.37 5.35-6z"/></svg>`,
                "subway": `<svg class="w-3.5 h-3.5 ${colorClass}" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 22V12a10 10 0 1 1 20 0v10"/><path d="M15 6.8v1.4a3 2.8 0 1 1-6 0V6.8"/><path d="M10 15h.01"/><path d="M14 15h.01"/><path d="M10 19a4 4 0 0 1-4-4v-3a6 6 0 1 1 12 0v3a4 4 0 0 1-4 4Z"/><path d="m9 19-2 3"/><path d="m15 19 2 3"/></svg>`,
                "food": `<svg class="w-4 h-4 ${colorClass}" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2" /><path d="M7 2v20" /><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7" /></svg>`,
                "hotel": `<svg class="w-4 h-4 ${colorClass}" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M2 4v16" /><path d="M2 8h18a2 2 0 0 1 2 2v10" /><path d="M2 17h20" /><path d="M6 8v9" /></svg>`,
                "shopping": `<svg class="w-4 h-4 ${colorClass}" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z" /><path d="M3 6h18" /><path d="M16 10a4 4 0 0 1-8 0" /></svg>`,
                "sight": `<svg class="w-4 h-4 ${colorClass}" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z" /><circle cx="12" cy="13" r="3" /></svg>`
            };
            return icons[name] || icons["sight"];
        }

        const highlightText = (text, item, isClickable = false) => {
            if (!text) return "";
            return text.replace(/\*\*(.*?)\*\*/g, (match, p1) => {
                if (isClickable && item) {
                    let data = item;
                    if (item.highlights && item.highlights[p1]) {
                        data = item.highlights[p1];
                        if (!data.title) data.title = p1; 
                    }
                    const safeTitle = (data.title || p1 || item.name).replace(/'/g, "\\'").replace(/"/g, '&quot;');
                    const safeAddress = (data.address || item.address || "").replace(/'/g, "\\'").replace(/"/g, '&quot;');
                    const safeHours = (data.hours || item.hours || "").replace(/'/g, "\\'").replace(/"/g, '&quot;');
                    const safeQuery = (data.query || item.query || p1).replace(/'/g, "\\'").replace(/"/g, '&quot;');
                    const safeJpTitle = (data.jpName || item.jpName || "").replace(/'/g, "\\'").replace(/"/g, '&quot;');
                    const safeTicket = (data.ticket || item.ticket || "").replace(/'/g, "\\'").replace(/"/g, '&quot;');
                    const safeAircraft = (data.aircraft || item.aircraft || "").replace(/'/g, "\\'").replace(/"/g, '&quot;');
                    
                    // ç¢ºä¿é€™è£¡æŠ“å¾—åˆ° desc ä¸¦é€²è¡Œç·¨ç¢¼
                    const safeDesc = (data.desc || item.desc || "").replace(/'/g, "\\'").replace(/"/g, '&quot;'); 
                    
                    const clickData = { title: safeTitle, address: safeAddress, hours: safeHours, query: safeQuery, jpName: safeJpTitle, ticket: safeTicket, aircraft: safeAircraft, desc: safeDesc };
                    const dataStr = encodeURIComponent(JSON.stringify(clickData)).replace(/'/g, "%27");
                    
                    if (item.highlights && item.highlights[p1]) {
                        return `<span class="highlight-text-clickable" onclick="openModal('${dataStr}')">${p1}</span>`;
                    }
                    return `<span class="font-bold text-slate-600">${p1}</span>`;
                } else {
                    return `<span class="font-bold text-slate-600">${p1}</span>`;
                }
            });
        };

        window.openModal = function(arg1, address, hours, ticket, query, jpTitle, aircraft, desc) {
            let data = {};
            if (typeof arg1 === 'string' && (arg1.startsWith('%7B') || arg1.startsWith('{'))) {
                try { data = JSON.parse(decodeURIComponent(arg1)); } catch (e) { data = { title: arg1 }; }
            } else {
                data = { title: arg1, address: address, hours: hours, ticket: ticket, query: query, jpName: jpTitle, aircraft: aircraft, desc: desc };
            }
            document.getElementById('modal-title').textContent = data.title || "";
            document.getElementById('modal-jp-name').textContent = data.jpName || ""; 
            
            // â˜…â˜…â˜… èªªæ˜æ–‡å­—é‚è¼¯ â˜…â˜…â˜…
            const descEl = document.getElementById('modal-desc');
            const descWrapper = document.getElementById('modal-desc-wrapper');
            if (data.desc) {
                descEl.textContent = data.desc;
                descWrapper.classList.remove('hidden');
            } else {
                descWrapper.classList.add('hidden');
            }

            // â˜…â˜…â˜… åœ°å€é‚è¼¯ï¼šæœ‰è³‡æ–™æ‰é¡¯ç¤º â˜…â˜…â˜…
            const addressRow = document.getElementById('modal-address-row');
            if (data.address && data.address !== "") {
                document.getElementById('modal-address').textContent = data.address;
                addressRow.classList.remove('hidden');
            } else {
                addressRow.classList.add('hidden');
            }

            // â˜…â˜…â˜… ç‡Ÿæ¥­æ™‚é–“é‚è¼¯ï¼šæœ‰è³‡æ–™æ‰é¡¯ç¤º â˜…â˜…â˜…
            const hoursRow = document.getElementById('modal-hours-row');
            if (data.hours && data.hours !== "") {
                document.getElementById('modal-hours').textContent = data.hours;
                hoursRow.classList.remove('hidden');
            } else {
                hoursRow.classList.add('hidden');
            }
            
            // â˜…â˜…â˜… è²»ç”¨/ç¥¨åƒ¹é‚è¼¯ â˜…â˜…â˜…
            const ticketRow = document.getElementById('modal-ticket-row');
            const ticketText = document.getElementById('modal-ticket');
            if (data.ticket && data.ticket !== 'undefined' && data.ticket !== "") {
                ticketText.textContent = data.ticket;
                ticketRow.classList.remove('hidden');
            } else {
                ticketRow.classList.add('hidden');
            }

            // â˜…â˜…â˜… æ©Ÿå‹é‚è¼¯ â˜…â˜…â˜…
            const aircraftRow = document.getElementById('modal-aircraft-row');
            const aircraftText = document.getElementById('modal-aircraft');
            if (data.aircraft && data.aircraft !== "") {
                aircraftText.textContent = data.aircraft;
                aircraftRow.classList.remove('hidden');
            } else {
                aircraftRow.classList.add('hidden');
            }

            // â˜…â˜…â˜… åœ°åœ–æŒ‰éˆ•é‚è¼¯ï¼šæ²’ query å°±éš±è— â˜…â˜…â˜…
            const mapBtnContainer = document.getElementById('modal-map-btn-container');
            if (data.query && data.query !== "") {
                document.getElementById('modal-map-btn').onclick = function() { 
                    window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(data.query)}`, '_blank'); 
                };
                mapBtnContainer.classList.remove('hidden');
            } else {
                mapBtnContainer.classList.add('hidden');
            }

            document.getElementById('location-modal').classList.remove('hidden');
        };

        window.closeModal = function() { document.getElementById('location-modal').classList.add('hidden'); };
        window.openInGoogleMaps = function(query) {
            if (query) window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(query)}`, '_blank'); 
        }

        const DEFAULT_ITINERARY_DATA = {
            "meta": { "title": "2026 å†¬å­£é™å®š | åŒ—æµ·é“å…­å¤©äº”å¤œä¹‹æ—…", "subtitle": "ç ´å†°èˆ¹ï¼é›ªä¸Šæ´»å‹•ï¼å°æ¨½æ•£ç­–", "dates": "2026-02-20 ~ 2026-02-25", "travelers": 2, "budget_per_person": 45000, "currency": "JPY" },
            "days": [
                {
                    "id": 1, "date": "02/20 (äº”)", "title": "æœ­å¹Œå•Ÿç¨‹", "subtitle": "æ©Ÿå ´ç¾é£Ÿ â” å¸‚å€è£œè²¨ â” æµªæ¼«å¤œæ™¯", "theme": "ç¾é£Ÿ/å¤œæ™¯", "transport_mode": "Public", "location": "æœ­å¹Œ, æ—¥æœ¬", "sunrise": "06:28", "sunset": "17:12", "jmaUrl": "https://www.jma.go.jp/bosai/forecast/#area_type=class20s&area_code=0110000", "summary": "æ¡ƒåœ’æ©Ÿå ´ -> æ–°åƒæ­²æ©Ÿå ´ -> é£¯åº—Check-in -> æœ­å¹Œå¤œæ™¯", "breakfast": "æº«æš–çš„å®¶ / æ©Ÿä¸Šè‡ªç†", "lunch": "ä¸€å¹»æ‹‰éºµ (æ–°åƒæ­²æ©Ÿå ´)", "dinner": "æ ¹å®¤èŠ±ä¸¸è¿´è½‰å£½å¸", "lodging": "Vessel Innæœ­å¹Œä¸­å³¶å…¬åœ’é£¯åº—",
                    "details": [
                        { "time": "04:00", "name": "æ¡ƒåœ’æ©Ÿå ´ç¬¬ä¸€èˆªå»ˆ", "type": "airport", "desc": "è¾¦ç†å ±åˆ°æ‰‹çºŒèˆ‡è¡Œææ‰˜é‹ã€‚", "query": "æ¡ƒåœ’æ©Ÿå ´ Terminal 1", "jpName": "å°æ¹¾æ¡ƒåœ’å›½éš›ç©ºæ¸¯ ç¬¬1ã‚¿ãƒ¼ãƒŸãƒŠãƒ«", "address": "æ¡ƒåœ’å¸‚å¤§åœ’å€èˆªç«™å—è·¯15è™Ÿ", "hours": "24å°æ™‚é–‹æ”¾" },
                        { 
                            "time": "06:20", 
                            "name": "è™èˆª IT 234", 
                            "type": "flight", 
                            "desc": "æ­ä¹˜ é£›å¾€åŒ—æµ·é“æ–°åƒæ­²æ©Ÿå ´ã€‚(é»æ“ŠæŸ¥çœ‹è¡Œæè³‡è¨Š)", 
                            "highlights": {
                                "è™èˆª IT 234": {
                                    "desc": "æ‰˜é‹1ä»¶ 20 å…¬æ–¤\n\næ¯ä½æ—…å®¢åƒ…å¯æ”œå¸¶ä¸€ä»¶æ‰‹æè¡Œæã€”å°ºå¯¸å°æ–¼54cm x 38cm x 23cmï¼ˆä¸Šè¿°å°ºå¯¸åŒ…å«è¼ªå­åŠæ‰‹æŠŠç­‰å¤–éƒ¨çªå‡ºç‰©ï¼‰ã€•èˆ‡ä¸€ä»¶å€‹äººéš¨èº«ç‰©å“(å¦‚æ‰‹æåŒ…ã€é›»è…¦åŒ…æˆ–å…ç¨…å•†å“)ï¼Œåˆè¨ˆäºŒä»¶ç¸½é‡ä¸å¾—è¶…é 10 å…¬æ–¤ã€‚",
                                    "address": "",
                                    "hours": "",
                                    "query": "",
                                    "jpName": "",
                                    "aircraft": ""
                                }
                            },
                            "query": "æ¡ƒåœ’åœ‹éš›æ©Ÿå ´ç¬¬ä¸€èˆªå»ˆ", 
                            "jpName": "å°æ¹¾æ¡ƒåœ’å›½éš›ç©ºæ¸¯ ç¬¬1ã‚¿ãƒ¼ãƒŸãƒŠãƒ«", 
                            "address": "æ¡ƒåœ’å¸‚å¤§åœ’å€èˆªç«™å—è·¯15è™Ÿ (ç¬¬ä¸€èˆªå»ˆ)", 
                            "hours": "èˆªç­æ™‚é–“ä¾èˆªç©ºå…¬å¸å…¬å‘Š", 
                            "flight": "é£›è¡Œæ™‚é–“ 3å°æ™‚35åˆ†", 
                            "aircraft": "Airbus A320 / A320neo (å–®èµ°é“)" 
                        },
                        { "time": "10:55", "name": "åŒ—æµ·é“æ–°åƒæ­²æ©Ÿå ´", "type": "airport", "desc": "æŠµé”ï¼Œè¾¦ç†å…¥å¢ƒæ‰‹çºŒã€‚", "query": "æ–°åƒæ­²æ©Ÿå ´", "jpName": "æ–°åƒæ­³ç©ºæ¸¯", "address": "æ—¥æœ¬ã€ã€’066-0012 åŒ—æµ·é“åƒæ­³å¸‚ç¾ã€…", "hours": "åœ‹å…§ç·š 6:20-23:00" },
                        { "time": "12:00", "name": "ä¸€å¹»æ‹‰éºµ æ–°åƒæ­²æ©Ÿå ´åº—", "type": "food", "desc": "æ­¥è¡Œè‡³åœ‹å…§ç·š 3F **åŒ—æµ·é“æ‹‰éºµé“å ´**ï¼Œäº«ç”¨è¶…äººæ°£æ¿ƒéƒé®®è¦æ¹¯é ­æ‹‰éºµã€‚", "query": "ä¸€å¹»æ‹‰éºµ æ–°åƒæ­²æ©Ÿå ´åº—", "jpName": "ãˆã³ãã°ä¸€å¹» æ–°åƒæ­³ç©ºæ¸¯åº—", "address": "æ–°åƒæ­²æ©Ÿå ´åœ‹å…§ç·šèˆªå»ˆ 3F", "hours": "10:00-21:00", "ticket": "æ‹›ç‰Œï¼šé®®è¦é¹½å‘³æ‹‰éºµ / éœ€æ’éšŠ" },
                        { "time": "13:10", "name": "äº¤é€šï¼šæ­¥è¡Œå‰å¾€è»Šç«™/å·´å£«ç«™", "type": "walking", "desc": "å¾åœ‹å…§ç·š 3F ç§»å‹•è‡³ B1F æˆ– 1Fã€‚", "query": "New Chitose Airport", "jpName": "ç©ºæ¸¯å†…ç§»å‹•", "address": "åœ‹å…§ç·šèˆªå»ˆ", "hours": "ç´„ 10-15 åˆ†é˜" },
                        { "time": "13:30", "name": "äº¤é€šç§»å‹•ï¼šæ–°åƒæ­²æ©Ÿå ´ â” é£¯åº—", "type": "transport", "desc": "(äºŒé¸ä¸€)\n1. **JR å¿«é€Ÿ Airport**ï¼šæ­è‡³**æœ­å¹Œç«™**ï¼Œè½‰ä¹˜ **åœ°ä¸‹éµå—åŒ—ç·š** è‡³ **ä¸­å³¶å…¬åœ’ç«™** (2è™Ÿå‡ºå£)ã€‚\n2. **æ©Ÿå ´å·´å£«**ï¼šç›´é”ä¸­å³¶å…¬åœ’ (å…æ¬è¡Œæï¼Œä½†åœ¨è·¯é¢å¯èƒ½å—é›ªæ³å½±éŸ¿)ã€‚", "query": "JR æ–°åƒæ­²æ©Ÿå ´ç«™", "jpName": "æ–°åƒæ­³ç©ºæ¸¯é§… / ç©ºæ¸¯é€£çµ¡ãƒã‚¹", "address": "JR: B1F | å·´å£«: 1F ä¹˜è»Šè™•", "hours": "JR: æ¯12åˆ†ä¸€ç­ | å·´å£«: ç´„æ¯å°æ™‚ä¸€ç­", "ticket": "JR: Â¥1,150 + åœ°éµ Â¥210 | å·´å£«: Â¥1,300", "highlights": { "JR å¿«é€Ÿ Airport": { "query": "JR æ–°åƒæ­²æ©Ÿå ´ç«™", "jpName": "JR æ–°åƒæ­³ç©ºæ¸¯é§…", "address": "æ–°åƒæ­²æ©Ÿå ´ B1F", "hours": "æ¯ 12-15 åˆ†é˜ä¸€ç­", "ticket": "Â¥1,150" }, "æœ­å¹Œç«™": { "query": "Sapporo Station", "jpName": "JR æœ­å¹Œé§…", "address": "åŒ—æµ·é“æœ­å¹Œå¸‚åŒ—åŒºåŒ—6æ¡è¥¿4ä¸ç›®", "hours": "05:00-24:00" }, "åœ°ä¸‹éµå—åŒ—ç·š": { "query": "Sapporo Subway Namboku Line", "jpName": "æœ­å¹Œå¸‚å–¶åœ°ä¸‹é‰„å—åŒ—ç·š", "address": "æœ­å¹Œç«™ â” ä¸­å³¶å…¬åœ’ç«™", "hours": "ç´„ 6 åˆ†é˜ä¸€ç­", "ticket": "Â¥210" }, "ä¸­å³¶å…¬åœ’ç«™": { "query": "Nakajima Koen Station", "jpName": "ä¸­å³¶å…¬åœ’é§… (N09)", "address": "æœ­å¹Œå¸‚ä¸­å¤®åŒºå—9æ¡è¥¿4ä¸ç›®", "hours": "06:00-24:00" }, "æ©Ÿå ´å·´å£«": { "query": "New Chitose Airport Bus Stop", "jpName": "ç©ºæ¸¯é€£çµ¡ãƒã‚¹ (ä¸­å³¶å…¬åœ’è¡Œ)", "address": "åœ‹å…§ç·š 14/22 è™Ÿä¹˜è»Šè™•", "hours": "ç­æ¬¡è¼ƒå°‘", "ticket": "Â¥1,300" } } },
                        { "time": "15:00", "name": "Lawson æœ­å¹Œä¸­å³¶å…¬åœ’åº—", "type": "shopping", "desc": "é£¯åº—éš”å£ï¼Œè³¼è²· **é˜²æ»‘é‹å¥—** è£åœ¨é‹å­ä¸Šï¼Œé¿å…é›ªåœ°æ»‘å€’ã€‚", "query": "Lawson Sapporo Nakajima Park", "jpName": "ãƒ­ãƒ¼ã‚½ãƒ³ æœ­å¹Œä¸­å³¶å…¬åœ’åº—", "address": "å°±åœ¨é£¯åº—è½‰è§’ (èµ°è·¯ç´„ 1 åˆ†é˜)", "hours": "24å°æ™‚", "ticket": "Â¥1,500 / å¿…è²·é˜²æ»‘é‹å¥—" },
                        { "time": "15:10", "name": "Vessel Inn æœ­å¹Œä¸­å³¶å…¬åœ’", "type": "hotel", "desc": "å‰å¾€é£¯åº—è¾¦ç† Check-inã€‚", "query": "Vessel Inn æœ­å¹Œä¸­å³¶å…¬åœ’", "jpName": "ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³æœ­å¹Œä¸­å³¶å…¬åœ’", "address": "åŒ—æµ·é“æœ­å¹Œå¸‚ä¸­å¤®åŒºå—ä¹æ¡è¥¿4-1-2", "hours": "Check-in: 14:00" },
                        { "time": "15:25", "name": "äº¤é€šï¼šæ­ä¹˜åœ°ä¸‹éµ", "type": "subway", "desc": "ä¸­å³¶å…¬åœ’ â” å¤§é€šç«™", "query": "Nakajima Koen Station", "jpName": "åœ°ä¸‹é‰„å—åŒ—ç·š", "address": "ä¸­å³¶å…¬åœ’ç«™(N09) æ­å¾€éº»ç”Ÿæ–¹å‘ â” å¤§é€šç«™(N07)ä¸‹è»Š", "hours": "è»Šç¨‹ç´„ 3-4 åˆ†é˜", "ticket": "Â¥210 (å¯åˆ· IC å¡)" },
                        { "time": "15:30", "name": "UNIQLO æœ­å¹Œ Parco åº—", "type": "shopping", "desc": "å‰å¾€ Parco 8F æ¡è³¼ä¿æš–è¡£ç‰©ã€‚", "query": "UNIQLO Sapporo Parco", "jpName": "ãƒ¦ãƒ‹ã‚¯ãƒ­ æœ­å¹Œãƒ‘ãƒ«ã‚³åº—", "address": "æœ­å¹Œå¸‚ä¸­å¤®å€å—1æ¢è¥¿3-3 (Parco 8F)", "hours": "10:00-20:00" },
                        { "time": "17:00", "name": "æœ­å¹Œå¤§é€šå…¬åœ’", "type": "sight", "desc": "æ›ä¸Šæ–°è²·çš„ä¿æš–è¡£ç‰©ï¼Œå‰å¾€æ—é‚Šçš„å…¬åœ’æ•£æ­¥ï¼Œæ¬£è³é›ªæ™¯ã€‚", "query": "æœ­å¹Œå¤§é€šå…¬åœ’", "jpName": "å¤§é€šå…¬åœ’", "address": "æœ­å¹Œå¸‚ä¸­å¤®åŒºå¤§é€šè¥¿1ï½12ä¸ç›®", "hours": "å…¨å¤©é–‹æ”¾" },
                        { "time": "17:30", "name": "æœ­å¹Œé›»è¦–å¡”", "type": "sight", "desc": "ç™»ä¸Šå±•æœ›å°ï¼Œä¿¯ç°æœ­å¹Œå¸‚å€å¤œæ™¯ã€‚", "query": "æœ­å¹Œé›»è¦–å¡”", "jpName": "ã•ã£ã½ã‚ãƒ†ãƒ¬ãƒ“å¡”", "address": "æœ­å¹Œå¸‚ä¸­å¤®åŒºå¤§é€šè¥¿1ä¸ç›®", "hours": "9:00 ï½ 22:00 ï¼ˆå±•æœ›æœ€çµ‚å…¥å ´ 21:50ï¼‰", "ticket": "Â¥1,000" },
                        { "time": "18:30", "name": "æœ­å¹Œåœ°ä¸‹è¡—", "type": "shopping", "desc": "è‡ªç”±é€›è¡—æ™‚é–“ï¼šå‰å¾€ Aurora Town/Pole Town æˆ– Parco ç™¾è²¨ã€‚", "query": "æœ­å¹Œåœ°ä¸‹è¡—", "jpName": "ã•ã£ã½ã‚åœ°ä¸‹è¡—", "address": "æœ­å¹Œå¸‚ä¸­å¤®åŒºå¤§é€š", "hours": "10:00-20:00" },
                        { "time": "19:30", "name": "#C-pla ç‹¸å°è·¯4ä¸ç›®åº—", "type": "shopping", "desc": "å‰å¾€ç›¡æƒ…æ‰­è›‹ï¼(5ä¸ç›®åº—å·²æ­‡æ¥­ï¼Œæ”¹è‡³4ä¸ç›®ï¼Œç‹¸å°è·¯å¾ˆå¤šæ‰­è›‹åº—)", "query": "#C-pla ç‹¸å°è·¯4ä¸ç›®åº—", "jpName": "#C-pla ç‹¸å°è·¯4ä¸ç›®åº—", "address": "åŒ—æµ·é“æœ­å¹Œå¸‚ä¸­å¤®åŒºå—2æ¡è¥¿4ä¸ç›®10 æ¸…æ°´ãƒ“ãƒ«1Fãƒ»2F", "hours": "10:00-23:00" },
                        { "time": "20:15", "name": "äº¤é€šï¼šå‰å¾€æœ­å¹Œè»Šç«™", "type": "transport", "desc": "å¾ç‹¸å°è·¯æ­¥è¡Œç¶“åœ°ä¸‹è¡—æˆ–æ­åœ°éµå‰å¾€ JR Tower Stellar Placeã€‚", "query": "Sapporo Station", "jpName": "æœ­å¹Œé§…", "address": "å‰å¾€ JR Tower Stellar Place", "hours": "ç´„ 15-20 åˆ†é˜" },
                        { "time": "20:30", "name": "è¿´è½‰å£½å¸ æ ¹å®¤èŠ±ä¸¸", "type": "food", "desc": "äº«ç”¨æ™šé¤ã€‚\n1. **é¦–é¸ï¼šJR Tower Stellar Placeåº—** (6Fï¼Œé¢¨æ™¯å¥½ä½†æ’éšŠä¹…)\n2. **å‚™æ¡ˆï¼šmiredoåº—** (å¤§åŒç”Ÿå‘½å¤§æ¨“ B1ï¼Œç›¸å°å¥½æ’)", "query": "Nemuro Hanamaru JR Tower Stellar Place", "jpName": "å›è»¢å¯¿å¸ æ ¹å®¤èŠ±ã¾ã‚‹", "address": "æœ­å¹Œè»Šç«™å‘¨é‚Š", "hours": "11:00-22:00", "ticket": "äººæ°£ååº— / å»ºè­°å…ˆæŠ½è™Ÿç¢¼ç‰Œ", "highlights": { "é¦–é¸ï¼šJR Tower Stellar Placeåº—": { "query": "Nemuro Hanamaru JR Tower Stellar Place", "jpName": "å›è»¢å¯¿å¸ æ ¹å®¤èŠ±ã¾ã‚‹ JRã‚¿ãƒ¯ãƒ¼ã‚¹ãƒ†ãƒ©ãƒ—ãƒ¬ã‚¤ã‚¹åº—", "address": "æœ­å¹Œå¸‚ä¸­å¤®åŒºåŒ—5æ¡è¥¿2ä¸ç›® 6F", "hours": "11:00-22:00" }, "å‚™æ¡ˆï¼šmiredoåº—": { "title": "æ ¹å®¤èŠ±ä¸¸ miredoåº—", "query": "Nemuro Hanamaru miredo", "jpName": "å›è»¢å¯¿å¸ æ ¹å®¤èŠ±ã¾ã‚‹ å¤§åŒç”Ÿå‘½æœ­å¹Œãƒ“ãƒ«miredoåº—", "address": "æœ­å¹Œå¸‚ä¸­å¤®åŒºåŒ—3æ¡è¥¿3ä¸ç›®1 B1F", "hours": "11:00-22:00", "ticket": "å¾æœ­å¹Œç«™æ­¥è¡Œç´„ 5 åˆ†é˜" } } },
                        { "time": "22:00", "name": "äº¤é€šï¼šæ­ä¹˜åœ°ä¸‹éµå›é£¯åº—", "type": "subway", "desc": "æœ­å¹Œç«™ â” ä¸­å³¶å…¬åœ’ç«™", "query": "Sapporo Station Subway", "jpName": "åœ°ä¸‹é‰„å—åŒ—ç·š", "address": "æœ­å¹Œç«™(N06) â” ä¸­å³¶å…¬åœ’ç«™(N09)", "hours": "è»Šç¨‹ç´„ 5 åˆ†é˜", "ticket": "Â¥210 (å¯åˆ· IC å¡)" },
                        { "time": "22:15", "name": "é£¯åº—ä¼‘æ¯", "type": "hotel", "desc": "æŠµé”é£¯åº—ï¼Œé€”ä¸­ç¶“é **Lawson** è£œçµ¦éš”å¤©æ—©é¤ã€‚", "query": "Vessel Inn æœ­å¹Œä¸­å³¶å…¬åœ’", "jpName": "ãƒ™ãƒƒã‚»ãƒ«ã‚¤ãƒ³æœ­å¹Œä¸­å³¶å…¬åœ’", "address": "å—9è¥¿4", "hours": "24å°æ™‚" }
                    ]
                },
                {
                    "id": 2, "date": "02/21 (å…­)", "title": "æ—­å·ä¸€æ—¥éŠ (è·Ÿåœ˜ Day 1)", "subtitle": "å‹•ç‰©åœ’ â” é›ªä¸Šæ´»å‹• â” å†°ç€‘ç¥­", "summary": "æ—­å±±å‹•ç‰©åœ’ -> é›ªä¸Šæ¨‚åœ’ -> å±¤é›²å³½æº«æ³‰", "sunrise": "06:26", "sunset": "17:14", "warning": "åœ˜é«”å·´å£«è¡Œç¨‹ï¼š07:40 JRæœ­å¹ŒåŒ—å£é›†åˆï¼Œæ¯äººé™å¸¶ä¸€ä»¶å¤§å‹è¡Œæã€‚<br>âš ï¸ æ—¥æœ¬å¸æ©Ÿå·¥æ™‚æ§ç®¡åš´æ ¼ï¼Œåˆ‡å‹¿é²åˆ°ï¼Œä»¥å…è¢«ä¸ŸåŒ…ï¼", "breakfast": "æ—©é¤è‡ªç†", "lunch": "ç„—çƒ¤èƒèŸ¹æµ·é®®é™¶æ¿ç‡’å¾¡è†³", "dinner": "é£¯åº—è±ªè¯ç™¾åŒ¯è‡ªåŠ©é¤æˆ–æ—¥å¼å®´æœƒé¤", "lodging": "å±¤é›²å³½æº«æ³‰é£¯åº— (å¤§é›ª/æœé™½äº­/å±¤é›²é–£ç­‰åŒç´š)",
                    "details": [
                        { "time": "07:40", "name": "é›†åˆï¼šJR æœ­å¹Œè»Šç«™åŒ—å£", "type": "transport", "desc": "åœ˜é«”å·´å£«ä¹˜è»Šè™•é›†åˆã€‚è«‹å‹™å¿…æº–æ™‚ï¼Œ08:00 æº–æ™‚å‡ºç™¼ã€‚", "query": "JR Sapporo Station North Exit", "address": "æœ­å¹Œé§…åŒ—å£ å›£ä½“ãƒã‚¹ä¹—ã‚Šå ´", "hours": "07:40 é›†åˆ" },
                        { "time": "08:00", "name": "å‡ºç™¼ï¼šåŒ—æµ·é“ç ´å†°èˆ¹äºŒæ—¥éŠ", "type": "transport", "desc": "æ­ä¹˜å·´å£«å‰å¾€æ—­å· (è»Šç¨‹ç´„ 2.5 å°æ™‚)ã€‚", "query": "Asahikawa", "jpName": "æ—­å·ã¸ç§»å‹•", "hours": "å·´å£«ç§»å‹•" },
                        { "time": "10:30", "name": "æ—­å±±å‹•ç‰©åœ’", "type": "sight", "desc": "åœç•™ç´„ 100 åˆ†é˜ã€‚æ¯å¹´12æœˆä¸‹æ—¬ï½3æœˆä¸­æ—¬ï¼Œå¯è¿‘è·é›¢è§€è³ **ä¼éµæ•£æ­¥éŠè¡Œ**ï¼Œåœ¨çœ¼å‰é›†é«”æ–æ™ƒå‰é€²çš„å¯æ„›æ¨¡æ¨£ï¼", "query": "Asahiyama Zoo", "ticket": "é–€ç¥¨å·²å«", "highlights": { "æ—­å±±å‹•ç‰©åœ’": { "query": "Asahiyama Zoo", "jpName": "æ—­å±±å‹•ç‰©åœ’", "address": "åŒ—æµ·é“æ—­å·å¸‚æ±æ—­å·ç”ºå€‰æ²¼", "hours": "10:30-15:30 (å†¬å­£)" } } },
                        { "time": "12:30", "name": "åˆé¤ï¼šç„—çƒ¤èƒèŸ¹æµ·é®®é™¶æ¿ç‡’å¾¡è†³", "type": "food", "desc": "äº«ç”¨è±å¯Œçš„åŒ—æµ·é“æµ·é®®åˆé¤ã€‚", "query": "Asahikawa Lunch", "jpName": "æ˜¼é£Ÿ" },
                        { "time": "14:00", "name": "é›ªä¸Šæ´»å‹•é«”é©—", "type": "sight", "desc": "åœç•™ç´„ 60 åˆ†é˜ã€‚é«”é©—**é›ªä¸Šæ‘©æ‰˜è»Š**ã€**é›ªä¸Šæ©¡çš®è‰‡**ã€é›ªç›†åŠåƒè§€ **ç¾Šé§ç‰§å ´**ã€‚", "query": "Shikisai no Oka", "jpName": "é›ªéŠã³ä½“é¨“", "ticket": "è¡Œç¨‹åŒ…å«" },
                        { "time": "16:00", "name": "å±¤é›²å³½æº«æ³‰å†°ç€‘ç¥­", "type": "sight", "desc": "è§€è³å†°ç€‘ç¥­ (è¦–å®˜æ–¹å…¬å‘Šé–‹æ”¾ï¼Œè‹¥æš«åœå‰‡å–æ¶ˆ)ã€‚å£¯è§€çš„å†°é›•èˆ‡ä¸ƒå½©é»ç‡ˆã€‚", "query": "Sounkyo Ice Fall Festival", "jpName": "å±¤é›²å³¡æ¸©æ³‰æ°·ç€‘ã¾ã¤ã‚Š", "address": "ä¸Šå·ç”ºå±¤é›²å³¡æ¸©æ³‰", "hours": "17:00-21:30" },
                        { "time": "17:30", "name": "å…¥ä½å±¤é›²å³½æº«æ³‰é£¯åº—", "type": "hotel", "desc": "å¤œå®¿ï¼šå±¤é›²å³½å‘¨é‚Šæº«æ³‰é£¯åº— (å¤§é›ªã€æœé™½äº­ã€æœé™½RESORTã€å±¤é›²é–£ã€è§€å…‰ã€å±±æ™¯æˆ–åŒç´š)ã€‚\næ™šé¤ï¼šé£¯åº—å…§äº«ç”¨è±ªè¯ç™¾åŒ¯è‡ªåŠ©é¤æˆ–æ—¥å¼å®´æœƒé¤ã€‚", "query": "Sounkyo Onsen", "jpName": "å±¤é›²å³¡æ¸©æ³‰ãƒ›ãƒ†ãƒ«", "address": "åŒ—æµ·é“ä¸Šå·éƒ¡ä¸Šå·ç”ºå±¤é›²å³¡" }
                    ]
                },
                {
                    "id": 3, "date": "02/22 (æ—¥)", "title": "ç´‹åˆ¥ç ´å†°èˆ¹ (è·Ÿåœ˜ Day 2)", "subtitle": "æµæ˜Ÿç€‘å¸ƒ â” ç ´å†°èˆ¹ â” ç”·å±±é…’é€ ", "summary": "éŠ€æ²³æµæ˜Ÿç€‘å¸ƒ -> ç´‹åˆ¥ç ´å†°èˆ¹ -> ç”·å±±é…’é€  -> æœ­å¹Œ", "sunrise": "06:25", "sunset": "17:15", "warning": "åœ˜é«”å·´å£«è¡Œç¨‹ Day 2ï¼šè«‹ä¾å°éŠæŒ‡ç¤ºæ™‚é–“æ–¼é£¯åº—å¤§å»³é›†åˆå‡ºç™¼ã€‚<br>âš ï¸ æ—¥æœ¬å¸æ©Ÿå·¥æ™‚æ§ç®¡åš´æ ¼ï¼Œè¡Œç¨‹ç·Šæ¹Šï¼Œåˆ‡å‹¿é²åˆ°ï¼", "breakfast": "é£¯åº—å…§æ—©é¤", "lunch": "è±ªè¯èŸ¹è…³å¹²è²ç«¯çˆç‡’å¥—é¤", "dinner": "æœ­å¹Œå¸‚å€è‡ªç†", "lodging": "æœ­å¹Œè’™ç‰¹åˆ©åŸƒå¾·çˆ¾éœå¤«é…’åº—",
                    "details": [
                        { "time": "08:00", "name": "é£¯åº—å‡ºç™¼", "type": "transport", "desc": "äº«ç”¨é£¯åº—æ—©é¤å¾Œå‡ºç™¼ã€‚", "query": "Sounkyo Onsen", "jpName": "ãƒ›ãƒ†ãƒ«å‡ºç™º" },
                        { "time": "09:00", "name": "éŠ€æ²³æµæ˜Ÿç€‘å¸ƒ", "type": "sight", "desc": "åƒè§€è‘—åçš„å¤«å¦»ç€‘å¸ƒï¼Œå†¬å­£ç€‘å¸ƒçµå†°å½¢æˆå£¯è§€å†°æŸ±ã€‚", "query": "Ginga Ryusei Waterfall", "jpName": "éŠ€æ²³ãƒ»æµæ˜Ÿã®æ»", "address": "åŒ—æµ·é“ä¸Šå·éƒ¡ä¸Šå·ç”ºå±¤é›²å³¡" },
                        { "time": "11:00", "name": "ç´‹åˆ¥ç ´å†°èˆ¹ GARINKOè™Ÿ", "type": "sight", "desc": "æ­ä¹˜ GARINKO IIè™Ÿ æˆ– IIIè™Ÿ IMERU å‡ºæµ·ç ´å†°ã€‚\n*(æ­ä¹˜ç­æ¬¡èˆ‡èˆ¹å‹è¦–ç•¶å¤©èˆªç­ç‹€æ³å½ˆæ€§èª¿æ•´)*", "query": "Garinko Station", "jpName": "ã‚¬ãƒªãƒ³ã‚³å· (ç´‹åˆ¥)", "ticket": "èˆ¹ç¥¨å·²å«" },
                        { "time": "13:00", "name": "åˆé¤ï¼šè±ªè¯èŸ¹è…³å¹²è²ç«¯çˆç‡’", "type": "food", "desc": "äº«ç”¨é“åœ°æµ·é®®ç«¯çˆç‡’å¥—é¤ (èŸ¹è…³ã€å¹²è²ç­‰)ã€‚", "query": "Monbetsu Lunch", "jpName": "è±ªè¯æµ·é®®ç‚‰ç«¯ç„¼ã" },
                        { "time": "15:00", "name": "æ—­å·ç”·å±±é…’é€ ", "type": "sight", "desc": "åƒè§€åŒ—æµ·é“è‘—åçš„é€ é…’å» ï¼Œå“åšåæ°´èˆ‡æ¸…é…’ã€‚", "query": "Otokoyama Sake Brewery", "jpName": "ç”·å±±é…’é€ ã‚Šè³‡æ–™èˆ˜", "address": "åŒ—æµ·é“æ—­å·å¸‚æ°¸å±±2æ¡7ä¸ç›®" },
                        { "time": "18:30", "name": "æŠµé” JR æœ­å¹Œè»Šç«™", "type": "transport", "desc": "è¿”å›åŸé›†åˆåœ° (æœ­å¹Œç«™åŒ—å£) è§£æ•£ï¼ŒçµæŸäºŒæ—¥éŠè¡Œç¨‹ã€‚", "query": "Sapporo Station North Exit", "jpName": "æœ­å¹Œé§…åˆ°ç€ãƒ»è§£æ•£" },
                        { "time": "18:45", "name": "äº¤é€šï¼šå‰å¾€é£¯åº— (è¦–é›ªæ³äºŒé¸ä¸€)", "type": "transport", "desc": "1. **æ­¥è¡Œ**ï¼šç´„ 7-10 åˆ†é˜ï¼Œå¾æœ­å¹Œç«™æ­¥è¡Œå³é”ã€‚\n2. **è¨ˆç¨‹è»Š**ï¼šç´„ 3 åˆ†é˜ï¼Œè‹¥**ä¸‹å¤§é›ª**æˆ–è¡Œæå¤šå»ºè­°æ­è»Š (ç´„ Â¥700-1,000)ã€‚", "query": "Hotel Monterey Edelhof Sapporo", "jpName": "ãƒ›ãƒ†ãƒ«ãƒ¢ãƒ³ãƒˆãƒ¬ã‚¨ãƒ¼ãƒ‡ãƒ«ãƒ›ãƒ•æœ­å¹Œ", "address": "æœ­å¹Œå¸‚ä¸­å¤®åŒºåŒ—2æ¡è¥¿1ä¸ç›®1", "hours": "Check-in", "ticket": "æ­¥è¡Œ: å…è²» | è¨ˆç¨‹è»Š: ç´„Â¥700+" }
                    ]
                },
                {
                    "id": 4, "date": "02/23 (ä¸€)", "title": "å°æ¨½æµªæ¼«è¡Œ", "subtitle": "é‹æ²³æ•£ç­– â” å£½å¸é€š â” ç”œé»å·¡ç¦® â” å¤©ç‹—å±±", "summary": "å°æ¨½é‹æ²³ -> å ºç”ºé€šå•†åº—è¡— -> å¤©ç‹—å±±å¤œæ™¯", "sunrise": "06:23", "sunset": "17:16", "breakfast": "æ—©é¤è‡ªç†", "lunch": "æ”¿å£½å¸ æˆ– æ—­å£½å¸", "dinner": "æ‹‰éºµå…±å’Œåœ‹ / æœ­å¹Œå¸‚å€", "lodging": "æœ­å¹Œè’™ç‰¹åˆ©åŸƒå¾·çˆ¾éœå¤«é…’åº—",
                    "details": [
                        { "time": "09:30", "name": "äº¤é€šï¼šJR æœ­å¹Œ â” å°æ¨½", "type": "transport", "desc": "æ­ä¹˜ **JR å¿«é€Ÿ Airport** å‰å¾€å°æ¨½ã€‚\nğŸ’¡ **å°æ’‡æ­¥**ï¼šå»ºè­°åè»Šå»‚**å³å´**åº§ä½ï¼Œæ²¿é€”å¯æ¬£è³çŸ³ç‹©ç£çš„ç„¡æ•µæµ·æ™¯ï¼", "query": "Sapporo Station", "jpName": "JR å¿«é€Ÿã‚¨ã‚¢ãƒãƒ¼ãƒˆ", "address": "æœ­å¹Œç«™ â” å°æ¨½ç«™", "hours": "è»Šç¨‹ç´„ 35 åˆ†é˜", "ticket": "Â¥750" },
                        { "time": "10:30", "name": "å°æ¨½é‹æ²³ & å€‰åº«ç¾¤", "type": "sight", "desc": "å°æ¨½çš„åœ°æ¨™ã€‚æ¼«æ­¥åœ¨é‹æ²³æ²¿å²¸ï¼Œæ¬£è³ç´…ç£šå€‰åº«ç¾¤åœ¨é›ªåœ°ä¸­çš„æµªæ¼«æ™¯è‰²ã€‚æ·ºè‰æ©‹æ˜¯æœ€ä½³æ‹ç…§é»ã€‚", "query": "Otaru Canal", "jpName": "å°æ¨½é‹æ²³", "address": "åŒ—æµ·é“å°æ¨½å¸‚æ¸¯ç”º", "hours": "å…¨å¤©é–‹æ”¾" },
                        { "time": "12:00", "name": "åˆé¤ï¼šå°æ¨½å£½å¸é€š", "type": "food", "desc": "å°æ¨½æ˜¯æ¼«ç•«ã€Šå°‡å¤ªçš„å£½å¸ã€‹æ•…é„‰ï¼Œå¿…åƒæ–°é®®æµ·é®®ï¼\næ¨è–¦ï¼š**æ”¿å£½å¸**ã€**ä¼Šå‹¢é®¨** æˆ– **æ—­å£½å¸**ã€‚", "query": "Otaru Sushi Street", "jpName": "å°æ¨½å¯¿å¸å±‹é€šã‚Š", "address": "å°æ¨½å¸‚èŠ±åœ’", "hours": "11:00-21:00", "ticket": "é ç®— Â¥3,000~" },
                        { "time": "13:30", "name": "å ºç”ºé€šå•†åº—è¡— (ç”œé»å·¡ç¦®)", "type": "shopping", "desc": "ä¸€æ¢è¡—åƒéåŒ—æµ·é“çŸ¥åç”œé»ï¼\n1. **LeTAO æœ¬åº—**ï¼šå¿…åƒé›™å±¤ä¹³é…ªè›‹ç³•ã€‚\n2. **åŒ—è“æ¨“**ï¼šå¤¢ä¸æ€è­°æ³¡èŠ™ã€å¦–ç²¾ä¹‹æ£®å¹´è¼ªè›‹ç³•ã€‚\n3. **å…­èŠ±äº­**ï¼šè˜­å§†è‘¡è„å¥¶æ²¹å¤¾å¿ƒé¤…ã€‚", "query": "Sakaimachi Street", "jpName": "å ºç”ºé€šã‚Šå•†åº—è¡—", "address": "å°æ¨½å¸‚å ºç”º", "hours": "å¤§å¤šè‡³ 18:00" },
                        { "time": "15:00", "name": "åŒ—ä¸€ç¡å­é¤¨ & éŸ³æ¨‚ç›’å ‚", "type": "sight", "desc": "åƒè§€ç»ç’ƒå·¥è—å“èˆ‡ä¸–ç•Œæœ€å¤§çš„è’¸æ°£é˜ï¼ˆæ¯15åˆ†é˜æœƒé³´ç¬›ä¸€æ¬¡ï¼‰ã€‚", "query": "Otaru Music Box Museum", "jpName": "å°æ¨½ã‚ªãƒ«ã‚´ãƒ¼ãƒ«å ‚", "address": "å°æ¨½å¸‚ä½å‰ç”º4-1", "hours": "09:00-18:00" },
                        { "time": "16:30", "name": "å¤©ç‹—å±±çºœè»Š", "type": "sight", "desc": "æ­çºœè»Šä¸Šå±±çœ‹ã€ŒåŒ—æµ·é“ä¸‰å¤§å¤œæ™¯ã€ä¹‹ä¸€ã€‚é€™è£¡ä¹Ÿæ˜¯æ—¥åŠ‡ã€ŠFirst Love åˆæˆ€ã€‹å’Œé›»å½±ã€Šæƒ…æ›¸ã€‹çš„æ‹æ”å ´æ™¯ã€‚", "query": "Tenguyama Ropeway", "jpName": "å°æ¨½å¤©ç‹—å±±ãƒ­ãƒ¼ãƒ—ã‚¦ã‚¨ã‚¤", "address": "å°æ¨½å¸‚æœ€ä¸Š2-16-15", "hours": "09:00-21:00", "ticket": "å¾€è¿” Â¥1,600" },
                        { "time": "19:00", "name": "è¿”å›æœ­å¹Œ", "type": "transport", "desc": "å¾å°æ¨½ç«™æ­ä¹˜ JR è¿”å›æœ­å¹Œå¸‚å€åƒæ™šé¤ã€‚", "query": "Otaru Station", "jpName": "JR å°æ¨½é§…", "address": "å°æ¨½ç«™ â” æœ­å¹Œç«™", "hours": "è»Šç¨‹ç´„ 35-45 åˆ†é˜" }
                    ]
                },
                {
                    "id": 5, "date": "02/24 (äºŒ)", "title": "å¯Œè‰¯é‡é›ªä¹‹ç«¥è©± (åŒ…è»Šä¸€æ—¥éŠ)", "subtitle": "å°ˆè»Šæ¥é€ â” è–èª•æ¨¹ â” ç™½é¬šç€‘å¸ƒ â” ç²¾éˆéœ²å°", "summary": "ç¾ç‘›è–èª•æ¨¹ -> ç™½é¬šç€‘å¸ƒ -> ç²¾éˆéœ²å° -> ä¸‰å¤§èŸ¹", "sunrise": "06:21", "sunset": "17:18", "breakfast": "æ—©é¤è‡ªç† (è¶…å•†/éºµåŒ…)", "lunch": "å¯Œè‰¯é‡å”¯æˆ‘ç¨å°Šå’–å“©", "dinner": "æœ­å¹Œä¸‰å¤§èŸ¹åƒåˆ°é£½", "lodging": "æœ­å¹Œè’™ç‰¹åˆ©åŸƒå¾·çˆ¾éœå¤«é…’åº—",
                    "details": [
                        { "time": "09:00", "name": "é£¯åº—å¤§å»³é›†åˆ", "type": "transport", "desc": "åŒ…è»Šå¸æ©ŸæŠµé”é£¯åº—æ¥é€ï¼Œé–‹å•Ÿèˆ’é©çš„ä¸€å¤©ã€‚\n*è»Šç¨‹ç´„ 2.5 å°æ™‚å‰å¾€ç¾ç‘›*", "query": "Sapporo Station", "jpName": "æœ­å¹Œãƒ›ãƒ†ãƒ«å‡ºç™º (è²¸åˆ‡ã‚¿ã‚¯ã‚·ãƒ¼)", "hours": "09:00 å‡ºç™¼" },
                        { "time": "11:30", "name": "ç¾ç‘›è–èª•æ¨¹", "type": "sight", "desc": "åœ¨ä¸€ç‰‡é›ªç™½æ› é‡ä¸­å­¤ç¨çŸ—ç«‹çš„é›²æ‰æ¨¹ï¼Œå†¬å­£å¿…æ‹çš„æ¥µç°¡ç¾æ™¯ã€‚", "query": "Christmas Tree Biei", "jpName": "ã‚¯ãƒªã‚¹ãƒã‚¹ãƒ„ãƒªãƒ¼ã®æœ¨", "address": "åŒ—æµ·é“ä¸Šå·éƒ¡ç¾ç‘›ç”ºç¾ç•™å’Œ", "hours": "å…¨å¤©é–‹æ”¾ (ç§æœ‰åœ°è«‹å‹¿é€²å…¥ç”°é‡)" },
                        { "time": "12:30", "name": "åˆé¤ï¼šå”¯æˆ‘ç¨å°Šæ¹¯å’–å“©", "type": "food", "desc": "å¯Œè‰¯é‡è¶…äººæ°£æ’éšŠååº—ï¼Œè‡ªå®¶è£½é¦™è…¸æ­é…æ¿ƒéƒé»‘å’–å“©ã€‚", "query": "Yuiga Doxon Furano", "jpName": "å”¯æˆ‘ç‹¬å°Š", "address": "å¯Œè‰¯é‡å¸‚æ—¥ã®å‡ºç”º11-8", "hours": "11:00-21:00", "ticket": "Â¥1,200~" },
                        { "time": "14:00", "name": "ç™½é¬šç€‘å¸ƒ", "type": "sight", "desc": "çµ•ç¾è—è‰²å†°ç€‘ï¼Œåœ°ä¸‹æ¹§å‡ºçš„æ³‰æ°´åœ¨å†¬å­£çµæˆå†°æŸ±ï¼Œæºªæ°´å‘ˆç¾å¤¢å¹»çš„éˆ·è—è‰²ã€‚", "query": "Shirahige Waterfall", "jpName": "ç™½ã²ã’ã®æ»", "address": "ç¾ç‘›ç”ºç™½é‡‘", "hours": "å…¨å¤©é–‹æ”¾" },
                        { "time": "16:00", "name": "æ–°å¯Œè‰¯é‡ç‹å­é£¯åº— ç²¾éˆéœ²å°", "type": "sight", "desc": "æ£®æ—ä¸­çš„æœ¨å±‹èšè½ï¼Œå‚æ™šé»ç‡ˆå¾Œå®›å¦‚ç«¥è©±ä¸–ç•Œã€‚\n**æœ€ä½³æ™‚é–“ï¼š** æ—¥è½å¾Œ (ç´„16:30) è—èª¿æ™‚åˆ»æœ€ç¾ã€‚", "query": "Ningle Terrace", "jpName": "ãƒ‹ãƒ³ã‚°ãƒ«ãƒ†ãƒ©ã‚¹", "address": "å¯Œè‰¯é‡å¸‚ä¸­å¾¡æ–™ (æ–°å¯Œè‰¯é‡ç‹å­é£¯åº—å…§)", "hours": "12:00-20:45", "ticket": "å…è²»å…¥å ´" },
                        { "time": "17:30", "name": "è¿”å›æœ­å¹Œ", "type": "transport", "desc": "çµæŸå¤¢å¹»è¡Œç¨‹ï¼Œé©…è»Šè¿”å›æœ­å¹Œå¸‚å€ (è»Šç¨‹ç´„ 2.5 å°æ™‚)ã€‚", "query": "Sapporo", "jpName": "æœ­å¹Œã¸ç§»å‹•", "hours": "è»Šç¨‹ 2.5h" },
                        { "time": "20:00", "name": "å¤§åƒä¸‰å¤§èŸ¹åƒåˆ°é£½", "type": "food", "desc": "å›åˆ°æœ­å¹Œå¤§åƒ **ä¸‰å¤§èŸ¹åƒåˆ°é£½** (å¸ç‹èŸ¹ã€æ¾è‘‰èŸ¹ã€æ¯›èŸ¹) çŠ’è³è‡ªå·±ã€‚", "query": "Sapporo Crab Buffet", "jpName": "é›£é™€ / æ«»æ–™ç† (éœ€é ç´„)", "ticket": "Â¥6,000~Â¥10,000" }
                    ]
                },
                {
                    "id": 6, "date": "02/25 (ä¸‰)", "title": "æ»¿è¼‰è€Œæ­¸", "subtitle": "Outlet è¡€æ‹š â” æ©Ÿå ´æœ€å¾Œè¡åˆº â” æº«æš–çš„å®¶", "summary": "ä¸‰äº• OUTLET -> æ–°åƒæ­²æ©Ÿå ´ -> è¿”å°", "sunrise": "06:20", "sunset": "17:19", "breakfast": "é£¯åº—å…§æ—©é¤", "lunch": "Outlet ç¾é£Ÿè¡—", "dinner": "æ©Ÿä¸Šç°¡é¤", "lodging": "æº«æš–çš„å®¶",
                    "details": [
                        { "time": "10:00", "name": "å‰å¾€ä¸‰äº• OUTLET", "type": "shopping", "desc": "å‰å¾€ **ä¸‰äº• OUTLET è³¼ç‰©ä¸­å¿ƒ**", "query": "æœ­å¹Œä¸‰äº•OUTLET" },
                        { "time": "13:30", "name": "æŠµé”æ–°åƒæ­²æ©Ÿå ´", "type": "airport", "desc": "æŠµé” **æ–°åƒæ­²æ©Ÿå ´** å ±åˆ°", "query": "æ–°åƒæ­²æ©Ÿå ´" },
                        { 
                            "time": "14:40", 
                            "name": "æ­ä¹˜è¯èˆª CI 131", 
                            "type": "flight", 
                            "desc": "æ­ä¹˜ **è¯èˆª CI 131** è¿”å°ã€‚(é»æ“ŠæŸ¥çœ‹è¡Œæè³‡è¨Š)", 
                            "highlights": {
                                "æ­ä¹˜è¯èˆª CI 131": {
                                    "desc": "æ‰˜é‹ï¼š2ä»¶ å„23å…¬æ–¤\n\næ‰‹æï¼šç¶“æ¿Ÿè‰™æ—…å®¢æ¯ä½å¯æ”œå¸¶1ä»¶æ‰‹æè¡Œæ\nä»»ä½•è‰™ç­‰æ‰‹æè¡Œæé«”ç©å‡ä¸å¯è¶…é56X36X23å…¬åˆ†(22X14X9è‹±å‹)ï¼Œé‡é‡ä¸å¯è¶…é7å…¬æ–¤(15è‹±ç£…)",
                                    "address": "",
                                    "hours": "",
                                    "query": "",
                                    "jpName": "",
                                    "aircraft": ""
                                }
                            },
                            "query": "æ–°åƒæ­²æ©Ÿå ´", 
                            "address": "æ–°åƒæ­²æ©Ÿå ´", 
                            "hours": "èˆªç­æ™‚é–“" 
                        }
                    ]
                }
            ]
        };
        
        let appItineraryData = DEFAULT_ITINERARY_DATA; 

        // â˜…â˜…â˜… æ–°å¢ï¼šå‹•æ…‹è¡Œå‰æº–å‚™æ¸…å–®è³‡æ–™ â˜…â˜…â˜…
        const PREPARATION_LIST = {
            "ğŸªª é‡è¦è­‰ä»¶": [
                "è­·ç…§ (æœ‰æ•ˆæœŸé™éœ€6å€‹æœˆä»¥ä¸Š)",
                "VJW (Visit Japan Web) QR Code æˆªåœ–",
                "æ—¥å¹£ç¾éˆ” (å»ºè­°å¤šæ›å°é¡ï¼Œå¦‚åƒåœ“éˆ”)",
                "ä¿¡ç”¨å¡ (è‹¥æœ‰äº‹å…ˆè²·JRè¦å¸¶åŒå¼µå¡)",
                "äº¤é€š IC å¡ (Suica/PASMO/Kitaca) - å¹¾ä¹å…¨åŒ—æµ·é“äº¤é€šé€šç”¨",
                "æ—…éŠå¹³å®‰éšªä¿å–®",
                "å°ç£èº«åˆ†è­‰å½±æœ¬ (å‚™ç”¨)"
            ],
            "ğŸ”Œ é›»å­ç”¢å“": [
                "ç¶²å¡/eSIM (ç¢ºèªé–‹é€šæ—¥æœŸ)",
                "è¡Œå‹•é›»æº (ä½æº«è€—é›»å¿«ï¼Œå»ºè­°å¸¶2é¡†)",
                "å……é›»å™¨/å‚³è¼¸ç·š",
                "è½‰æ¥é ­ (æ—¥æœ¬ç‚ºé›™å­”æ‰æ’ï¼Œå°ç£é€šç”¨)",
                "ç›¸æ©Ÿ/åº•ç‰‡ (ä½æº«éœ€æ³¨æ„é›»æ± ä¿æš–)",
                "å–å¡é‡"
            ],
            "ğŸ‘• å€‹äººè¡£ç‰© (å«ä¿æš–)": [
                "æ›æ´—è¡£ç‰© (å…§è¡£è¤²/ä¸Šè¡£/è¥ªå­)",
                "ç¡è¡£ (é›–ç„¶é£¯åº—æœ‰æµ´è¡£ï¼Œä½†æ€•å†·æˆ–ä¸ç¿’æ…£å¯è‡ªå‚™)",
                "é˜²é¢¨é˜²æ°´ç¾½çµ¨å¤–å¥— (æ´‹è”¥å¼ç©¿æ³•)",
                "ç™¼ç†±è¡£/è¤² (Heatech æ¥µæš–/è¶…æ¥µæš–)",
                "ä¸€èˆ¬é•·è¤²/åˆ·æ¯›è¤²",
                "é˜²æ»‘é›ªé´ (éå¸¸é‡è¦ï¼è¦æœ‰æ·±åˆ»ç´‹)",
                "é›ªåœ°é˜²æ»‘é‹å¥— (è‹¥ç„¡é›ªé´ï¼Œå»ºè­°æº–å‚™æ–¹ä¾¿ç©¿è„«æ¬¾)",
                "åšæ¯›è¥ª/ç¾Šæ¯›è¥ª (å»ºè­°å¤šå¸¶)",
                "æ¯›å¸½ (éœ€èƒ½è“‹ä½è€³æœµ)",
                "åœå·¾/è„–åœ",
                "é˜²æ½‘æ°´æ‰‹å¥— (ç©é›ª/æ»‘æ‰‹æ©Ÿæ–¹ä¾¿)"
            ],
            "ğŸ§´ ç›¥æ´—/ä¿é¤Š/åŒ–å¦": [
                "åŒ–å¦å“ (åº•å¦/å½©å¦)",
                "ä¿é¤Šå“ (å»ºè­°å¸¶æ²¹é¡/éœœé¡ï¼Œæ—¥æœ¬æ¥µä¹¾)",
                "å¸å¦ä¹³ã€æ²¹",
                "æ´—é¢ä¹³",
                "ç‰™åˆ·/ç‰™è† (æ—¥æœ¬æå€¡ç’°ä¿ï¼Œéƒ¨åˆ†é£¯åº—ä¸æä¾›)",
                "ç‰™ç·šæ£’/æ£‰èŠ±æ£’",
                "æ´—/æ½¤é«®ä¹³ (é£¯åº—æœ‰ï¼Œå¯è‡ªå‚™æ…£ç”¨)",
                "é«˜ä¿æ¿•ä¹³æ¶²/è­·æ‰‹éœœ (æ—¥æœ¬æ¥µä¹¾)",
                "è­·å”‡è†",
                "éš±å½¢çœ¼é¡/è—¥æ°´"
            ],
            "ğŸ’Š å¸¸å‚™è—¥å“": [
                "æ„Ÿå†’è—¥ (å«é€€ç‡’)",
                "è…¸èƒƒè—¥",
                "æ­¢ç—›è—¥",
                "æšˆè»Šè—¥ (æ­å·´å£«/ç ´å†°èˆ¹å¿…å‚™)",
                "OKç¹ƒ/å¤–å‚·è—¥è†"
            ],
            "ğŸ’ å…¶ä»–å¿…å‚™": [
                "å£ç½© (æ©Ÿä¸Š/äººå¤šè™•é˜²è­·)",
                "é«’è¡£è¢‹/æ”¶ç´è¢‹",
                "ç©ºæ°´å£º (æ—¥æœ¬æ°´é¾é ­å¯ç”Ÿé£²ï¼Œä½†æœ‰ç“¶å­æ–¹ä¾¿)",
                "æš–æš–åŒ… (è²¼å¼/æ‰‹æ¡å¤šæº–å‚™)",
                "å¢¨é¡ (é›ªåœ°åå…‰å¼·ï¼Œé˜²é›ªç›²)",
                "æ‘ºç–Šå‚˜ (ä»¥é˜²æ¿•é›ª/æš´é¢¨é›ª)",
                "è³¼ç‰©è¢‹ (ç’°ä¿è¢‹)",
                "è¡£ç‰©å£“ç¸®è¢‹ (åšé‡è¡£ç‰©å¥½æ”¶ç´)",
                "æ¿•ç´™å·¾/é…’ç²¾æ£‰ç‰‡"
            ]
        };

        // â˜…â˜…â˜… ä¿®æ”¹ï¼šæ ¹æ“š PREPARATION_LIST å‹•æ…‹ç”¢ç”Ÿå…§å®¹ â˜…â˜…â˜…
        function renderPreparationContent() {
            let listHtml = '';
            let categoryIndex = 0;
            
            for (const [category, items] of Object.entries(PREPARATION_LIST)) {
                listHtml += `<div class="mb-6">
                    <h4 class="text-lg font-bold text-gray-700 mb-3 ml-1">${category}</h4>
                    <div class="space-y-3">`;
                
                items.forEach((item, index) => {
                    const id = `prep-${categoryIndex}-${index}`;
                    listHtml += `
                        <div class="checklist-item flex items-center p-3 rounded-lg border border-gray-100 bg-gray-50 hover:bg-sky-50 transition-colors" onclick="toggleCheck('${id}')">
                            <input type="checkbox" id="${id}" class="checklist-checkbox mr-3 pointer-events-none">
                            <span id="text-${id}" class="text-gray-700 font-medium text-sm">${item}</span>
                        </div>`;
                });

                listHtml += `</div></div>`;
                categoryIndex++;
            }

            return `
                <div class="day-content p-4 sm:p-8 bg-white rounded-xl shadow-lg border border-gray-100 space-y-6">
                    <h3 class="text-2xl font-bold accent-color mb-4 border-b pb-2">ğŸ§³ è¡Œå‰æº–å‚™æ¸…å–®</h3>
                    
                    ${listHtml}
                    
                    <div class="mt-8 bg-blue-50 p-5 rounded-xl border border-blue-100">
                        <h4 class="font-bold text-blue-800 mb-3 flex items-center">
                            <svg class="w-5 h-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                            å†¬å­£åŒ—æµ·é“ å¯¦ç”¨å°è²¼å£«
                        </h4>
                        <ul class="list-disc list-inside text-sm text-blue-700 space-y-2 leading-relaxed">
                            <li><strong>æ´‹è”¥å¼ç©¿æ­ï¼š</strong>å®¤å…§æš–æ°£éå¸¸å¼·ï¼ˆç´„25åº¦ï¼‰ï¼Œå»ºè­°ç©¿è„«æ–¹ä¾¿çš„å¤–å¥—ï¼Œè£¡é¢ä¸è¦ç©¿å¤ªåšçš„é«˜é ˜ï¼Œä»¥å…å®¤å…§ä¸­æš‘ã€‚</li>
                            <li><strong>é‹å­é¸æ“‡ï¼š</strong>æ™®é€šçƒé‹åœ¨é›ªåœ°å®Œå…¨æŠ“ä¸ä½ï¼Œå‹™å¿…æº–å‚™é›ªé´æˆ–åŠ è£é˜²æ»‘é‡˜ã€‚</li>
                            <li><strong>æ‰‹æ©Ÿä¿æš–ï¼š</strong>é‹°é›»æ± åœ¨é›¶ä¸‹ä½æº«è€—é›»æ¥µå¿«ï¼Œä¸ç”¨æ™‚è«‹æ”¾åœ¨è²¼èº«å£è¢‹ä¿æš–ï¼Œä¸¦å¤šå‚™è¡Œå‹•é›»æºã€‚</li>
                            <li><strong>éœé›»ï¼š</strong>æ°£å€™ä¹¾ç‡¥å®¹æ˜“æœ‰éœé›»ï¼Œæ¥è§¸é‡‘å±¬æŠŠæ‰‹å‰å¯å…ˆæ‘¸ç‰†å£æ”¾é›»ã€‚</li>
                        </ul>
                    </div>
                </div>
            `;
        }

        function renderMainTabs() {
            const container = document.getElementById('main-tabs');
            container.innerHTML = '';
            container.appendChild(createMainTab('ä¸»é ', 'home', `<svg class="w-5 h-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l-2-2m2 2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 01-1 1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>`));
            container.appendChild(createMainTab('è©³ç´°è¡Œç¨‹', 'itinerary-group', `<svg class="w-5 h-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h.01M7 12h.01M6 16h.01M9 16h.01M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>`));
            container.appendChild(createMainTab('è¡Œå‰æº–å‚™', 'preparation', `<svg class="w-5 h-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"/></svg>`));
        }

        function createMainTab(text, viewId, iconHtml) {
            const button = document.createElement('button');
            button.className = 'tab-item main-tab text-gray-500';
            button.innerHTML = iconHtml + text;
            button.onclick = () => switchMainView(viewId);
            button.setAttribute('data-view', viewId);
            return button;
        }

        function renderDayTabs() {
            const container = document.getElementById('day-tabs');
            container.innerHTML = '';
            appItineraryData.days.forEach(day => {
                const button = document.createElement('button');
                button.className = 'tab-item day-tab text-gray-500'; 
                button.textContent = `Day ${day.id}`;
                button.setAttribute('data-day-id', `day-${day.id}`);
                button.onclick = () => switchDayView(`day-${day.id}`);
                container.appendChild(button);
            });
        }

        function switchMainView(viewId) {
            activeMainTab = viewId;
            document.querySelectorAll('.main-tab').forEach(tab => {
                tab.classList.remove('active', 'border-b-2', 'border-sky-500', 'text-sky-600');
                if (tab.getAttribute('data-view') === viewId) tab.classList.add('active', 'border-b-2', 'border-sky-500', 'text-sky-600');
            });
            const contentContainer = document.getElementById('dynamic-content');
            const dayTabsContainer = document.getElementById('day-tabs');
            const baseClasses = 'content-area bg-gray-50 px-4 sm:px-6';

            if (viewId === 'home') {
                contentContainer.className = baseClasses + ' pt-2 pb-8 sm:pb-12';
                dayTabsContainer.classList.add('hidden'); dayTabsContainer.classList.remove('flex');
                contentContainer.innerHTML = renderHomeContent();
            } else if (viewId === 'itinerary-group') {
                contentContainer.className = baseClasses + ' pt-0 pb-8 sm:pb-12';
                dayTabsContainer.classList.remove('hidden'); dayTabsContainer.classList.add('flex');
                switchDayView(activeDayId);
            } else if (viewId === 'preparation') {
                contentContainer.className = baseClasses + ' pt-2 pb-8 sm:pb-12';
                dayTabsContainer.classList.add('hidden'); dayTabsContainer.classList.remove('flex');
                contentContainer.innerHTML = renderPreparationContent();
            }
        }

        function switchDayView(dayId) {
            activeDayId = dayId;
            document.querySelectorAll('.day-tab').forEach(tab => {
                tab.classList.remove('active', 'border-b-2', 'border-sky-500', 'text-sky-600');
                if (tab.getAttribute('data-day-id') === dayId) tab.classList.add('active', 'border-b-2', 'border-sky-500', 'text-sky-600');
            });
            const dayNumber = parseInt(dayId.split('-')[1]);
            const dayData = appItineraryData.days.find(d => d.id === dayNumber);
            if (dayData) document.getElementById('dynamic-content').innerHTML = renderDayContent(dayData);
        }

        function convertCurrency() {
            const input = document.getElementById('jpy-input');
            const output = document.getElementById('twd-output');
            if (input && output) {
                const val = parseFloat(input.value);
                if (!isNaN(val)) {
                    output.textContent = `${Math.round(val * FALLBACK_RATE)} TWD`;
                    output.className = output.className.replace('text-gray-700', 'text-pink-700');
                } else {
                    output.textContent = '0 TWD';
                }
            }
        }

        function renderExchangeRateBlock() {
            return `<div id="exchange-rate-block" class="max-w-xs mx-auto p-2 my-2 bg-transparent">
                <p class="text-sm font-semibold text-gray-600 mb-2 text-center">ğŸ’µ JPY â‡Œ TWD å¿«é€Ÿè©¦ç®—</p>
                <div class="flex space-x-2">
                    <div class="flex-1">
                        <input type="number" id="jpy-input" 
                            oninput="if(this.value.length > 6) this.value = this.value.slice(0, 6); convertCurrency()" 
                            placeholder="æ—¥å¹£" 
                            class="w-full py-2 px-3 border border-gray-300 rounded-lg text-sm shadow-sm focus:ring-sky-500">
                    </div>
                    <div id="twd-output" class="flex-1 flex items-center justify-end py-2 px-3 border border-gray-300 rounded-lg bg-gray-100 text-sm font-bold text-gray-700 text-right">0 TWD</div>
                </div>
                <div class="text-right text-xs text-gray-400 mt-1">åƒè€ƒåŒ¯ç‡: 0.20</div>
            </div>`;
        }

        function renderHomeContent() {
            // Restore flight data
             const outboundFlight = { title: "è™èˆª IT 234", aircraft: 'Airbus A320 / A320neo (å–®èµ°é“)', query: "æ¡ƒåœ’åœ‹éš›æ©Ÿå ´ç¬¬ä¸€èˆªå»ˆ", jpName: "å°æ¹¾æ¡ƒåœ’å›½éš›ç©ºæ¸¯ ç¬¬1ã‚¿ãƒ¼ãƒŸãƒŠãƒ«", address: "æ¡ƒåœ’å¸‚å¤§åœ’å€èˆªç«™å—è·¯15è™Ÿ (ç¬¬ä¸€èˆªå»ˆ)", hours: "èˆªç­æ™‚é–“ä¾èˆªç©ºå…¬å¸å…¬å‘Š" };
            const inboundFlight = { title: "è¯èˆª CI 131", aircraft: 'Boeing 777-300ER (å»£é«”å®¢æ©Ÿ)', query: "æ–°åƒæ­²æ©Ÿå ´", jpName: "æ–°åƒæ­³ç©ºæ¸¯ å›½éš›ç·šã‚¿ãƒ¼ãƒŸãƒŠãƒ«", address: "åœ‹éš›ç·šèˆªå»ˆ (æŠµé”æ¡ƒåœ’ç¬¬ä¸€èˆªå»ˆ)", hours: "èˆªç­æ™‚é–“" };

            return `
                <div class="day-content p-6 sm:p-8 bg-white rounded-xl shadow-lg border border-gray-100 space-y-6">
                    <div>
                        <h3 class="text-2xl font-bold accent-color mb-3 border-b pb-2">âœˆï¸ èˆªç­è³‡è¨Š</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 text-sm font-medium p-2">
                             <!-- å»ç¨‹ - ç§»é™¤ onclick å’Œ hover æ•ˆæœ -->
                             <div class="bg-blue-50 p-4 rounded-lg border border-blue-100 shadow-sm">
                                <div class="font-bold text-lg text-[#2E4057] mb-3 flex items-center"><span class="mr-2">ğŸ›«</span> å»ç¨‹ï¼šå°åŒ— â” æœ­å¹Œ</div>
                                <div class="text-gray-700 space-y-2">
                                    <p class="flex justify-between border-b border-blue-100 pb-1"><span class="font-semibold text-gray-500">èˆªç­</span><span class="font-bold text-gray-800">è™èˆª IT 234</span></p>
                                    <p class="flex justify-between border-b border-blue-100 pb-1"><span class="font-semibold text-gray-500">æ™‚é–“</span><span>06:20 - 10:55 (3h 35m)</span></p>
                                    <p class="flex justify-between border-b border-blue-100 pb-1"><span class="font-semibold text-gray-500">èˆªå»ˆ</span><span class="font-bold text-red-600">æ¡ƒåœ’æ©Ÿå ´ç¬¬ä¸€èˆªå»ˆ (T1)</span></p>
                                    <p class="flex justify-between items-start"><span class="font-semibold text-gray-500 whitespace-nowrap mr-2">æ©Ÿå‹</span><span class="text-right text-slate-600">Airbus A320<br><span class="text-xs text-gray-400">(å–®èµ°é“)</span></span></p>
                                </div>
                            </div>
                            <!-- å›ç¨‹ - ç§»é™¤ onclick å’Œ hover æ•ˆæœ -->
                            <div class="bg-orange-50 p-4 rounded-lg border border-orange-100 shadow-sm">
                                <div class="font-bold text-lg text-[#2E4057] mb-3 flex items-center"><span class="mr-2">ğŸ›¬</span> å›ç¨‹ï¼šæœ­å¹Œ â” å°åŒ—</div>
                                <div class="text-gray-700 space-y-2">
                                    <p class="flex justify-between border-b border-orange-100 pb-1"><span class="font-semibold text-gray-500">èˆªç­</span><span class="font-bold text-gray-800">è¯èˆª CI 131</span></p>
                                    <p class="flex justify-between border-b border-orange-100 pb-1"><span class="font-semibold text-gray-500">æ™‚é–“</span><span>14:40 - 18:15 (4h 10m)</span></p>
                                    <p class="flex justify-between border-b border-orange-100 pb-1"><span class="font-semibold text-gray-500">èˆªå»ˆ</span><span class="font-bold text-red-600">æ–°åƒæ­²æ©Ÿå ´ç¬¬ä¸€èˆªå»ˆ (T1)</span></p>
                                    <p class="flex justify-between items-start"><span class="font-semibold text-gray-500 whitespace-nowrap mr-2">æ©Ÿå‹</span><span class="text-right text-slate-600">Boeing 777-300ER<br><span class="text-xs text-gray-400">(å»£é«”å®¢æ©Ÿ)</span></span></p>
                                </div>
                            </div>
                        </div>
                    </div>
                    ${renderExchangeRateBlock()} 
                    <div>
                        <h3 class="text-2xl font-bold accent-color mb-3 border-b pb-2">ğŸ¯ è¡Œç¨‹äº®é»</h3>
                        <ul class="space-y-3 pl-4 list-disc text-gray-700">
                            <li><strong class="text-sky-700">é›ªåœ°å¥‡è§€ï¼š</strong>æ­ä¹˜ç´‹åˆ¥**ç ´å†°èˆ¹**ï¼Œè¿‘è·é›¢æ„Ÿå—é„‚éœæ¬¡å…‹æµ·çš„æµå†°éœ‡æ’¼ã€‚</li>
                            <li><strong class="text-sky-700">å‹•ç‰©æ˜æ˜Ÿï¼š</strong>å‰å¾€**æ—­å±±å‹•ç‰©åœ’**ï¼Œè§€è³å†¬å­£é™å®šçš„ä¼éµé›ªåœ°æ•£æ­¥ã€‚</li>
                            <li><strong class="text-sky-700">æº«æ³‰ç™‚ç™’ï¼š</strong>å…¥ä½**å±¤é›²å³½æº«æ³‰é£¯åº—**ï¼Œäº«å—æ—¥å¼è±ªè¯æœƒå¸­æ–™ç†èˆ‡å¤©ç„¶æº«æ³‰ã€‚</li>
                            <li><strong class="text-sky-700">ç¾é£Ÿå¤©å ‚ï¼š</strong>é«”é©—**ä¸‰å¤§èŸ¹åƒåˆ°é£½**ã€æ¹¯å’–å“©ã€ä¸€å¹»æ‹‰éºµç­‰åŒ—æµ·é“å¿…åƒç¾é£Ÿã€‚</li>
                        </ul>
                    </div>
                </div>
            `;
        }

        function renderDayContent(day) {
            const detailsHtml = day.details.map((item, index) => {
                let title = item.name;
                let desc = item.desc;
                const type = item.type; 

                // æ ¹æ“š type ç²å–æ¨£å¼é…ç½®
                const styleConfig = getStyleByType(type);
                const isTraffic = styleConfig.isTraffic;
                const iconSvg = getIconSvg(styleConfig.iconName, styleConfig.iconColor);
                const iconBg = styleConfig.bgColor;
                
                // Timeline Line Style (è™›ç·š vs å¯¦ç·š)
                const lineClass = isTraffic ? "timeline-line-dashed" : "timeline-line-solid";

                let itemData = { ...item };
                itemData.title = title;
                if (item.highlights && item.highlights[title]) {
                     Object.assign(itemData, item.highlights[title]);
                } else if(item.highlights) {
                     const highlightKey = Object.keys(item.highlights).find(key => title.includes(key) || item.desc.includes(key));
                     if(highlightKey) Object.assign(itemData, item.highlights[highlightKey]);
                }
                
                const dataStr = encodeURIComponent(JSON.stringify(itemData)).replace(/'/g, "%27");
                const lastItemClass = index === day.details.length - 1 ? 'last-item' : '';
                const firstItemClass = index === 0 ? 'first-item' : '';

                // Extract Price
                let priceDisplay = "";
                let infoText = "";
                if (itemData.ticket) {
                    if (itemData.ticket.includes("Â¥")) {
                         const parts = itemData.ticket.split(/[\/|]/);
                         priceDisplay = parts[0].trim();
                         if (parts.length > 1) infoText = parts.slice(1).join(" ").trim();
                    } else {
                        infoText = itemData.ticket;
                    }
                }
                
                if (itemData.flight) {
                    infoText = infoText ? `${infoText} â€¢ ${itemData.flight}` : itemData.flight;
                }

                // è™•ç†å¤šè¡Œæè¿°
                const descHtml = desc.split('\n').map((line, i) => {
                    return i === 0 ? highlightText(line, item, true) : `<span class="block mt-1 text-slate-500 pl-4 border-l-2 border-slate-200 text-xs">${highlightText(line, item, true)}</span>`;
                }).join('');

                if (isTraffic) {
                    // [äº¤é€š/é£›è¡Œ æ¨£å¼] - è™›ç·šéå ´ï¼Œç°¡å–®æ–‡å­—ï¼Œé»æ¨™é¡Œå¯çœ‹è©³æƒ…
                    return `
                    <div class="flex gap-3 relative pb-6 ${lastItemClass} ${firstItemClass}">
                        <div class="timeline-col"> 
                             <div class="${lineClass}"></div>
                             <div class="w-7 h-7 rounded-full ${iconBg} flex items-center justify-center shadow-sm z-10 relative mt-1">
                                ${iconSvg}
                             </div>
                        </div>
                        <div class="flex-grow py-1">
                            <div class="flex flex-col sm:flex-row sm:items-center gap-2 mb-1">
                                <span class="text-slate-500 font-bold font-['Noto_Sans_JP'] text-sm tracking-wide bg-slate-100 px-2 py-0.5 rounded w-fit">${item.time}</span>
                                <h4 class="text-base font-bold text-slate-600 leading-snug cursor-pointer hover:text-sky-600 hover:underline" onclick="openModal('${dataStr}')">${title}</h4>
                                ${priceDisplay ? `<span class="bg-gray-100 text-gray-500 text-xs font-bold px-1.5 py-0.5 rounded border border-gray-200">${priceDisplay}</span>` : ''}
                            </div>
                            <div class="text-xs text-slate-500 leading-relaxed pl-1 border-l-2 border-slate-200 ml-1">
                                ${descHtml}
                            </div>
                            ${infoText ? `<p class="text-[10px] text-yellow-600 mt-1 pl-2 font-medium">ğŸ’¡ ${infoText}</p>` : ''}
                        </div>
                    </div>
                    `;
                } else {
                    // [ä¸€èˆ¬æ¨£å¼ (å«æ©Ÿå ´åœ°é»)] - ç™½è‰²å¡ç‰‡ï¼Œå¯¦ç·š
                    return `
                    <div class="flex gap-3 relative pb-8 ${lastItemClass} ${firstItemClass}">
                        <div class="timeline-col"> 
                             <div class="timeline-line-solid"></div>
                             <div class="w-8 h-8 rounded-full ${iconBg} flex items-center justify-center shadow-md z-10 relative mt-1">
                                ${iconSvg}
                             </div>
                        </div>
                        <div class="flex-grow bg-white rounded-xl p-4 shadow-sm border border-gray-100 hover:shadow-md transition-all relative">
                            <div class="flex justify-between items-start mb-2">
                                <span class="text-slate-500 font-bold font-['Noto_Sans_JP'] text-sm tracking-wide bg-slate-100 px-2 py-0.5 rounded">${item.time}</span>
                                ${priceDisplay ? `<span class="bg-gray-100 text-gray-600 text-xs font-bold px-2 py-1 rounded border border-gray-200">${priceDisplay}</span>` : '' }
                            </div>
                            <h4 class="text-lg font-bold text-sky-600 mb-1 leading-snug cursor-pointer hover:underline" onclick="openModal('${dataStr}')">${title}</h4>
                            <p class="text-sm text-gray-600 mb-3 leading-relaxed">${highlightText(desc, item, true).replace(/\n/g, '<br>')}</p>
                            ${infoText ? `<div class="bg-yellow-50 border border-yellow-100 text-yellow-800 text-xs p-2.5 rounded-lg mb-3 flex items-start"><span class="mr-1.5 text-sm">ğŸ’¡</span><span class="mt-0.5 leading-snug">${infoText}</span></div>` : ''}
                            <div class="text-sky-500 text-xs font-bold flex items-center hover:text-sky-600 mt-auto pt-2 border-t border-gray-50 cursor-pointer w-fit" onclick="event.stopPropagation(); openInGoogleMaps('${itemData.query}')">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 mr-1" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" /></svg>
                                åœ°åœ–å°èˆª
                            </div>
                        </div>
                    </div>
                    `;
                }
            }).join('');

            return `
                <div class="w-full px-1">
                    <div class="mb-6 pl-2">
                        <h2 class="text-2xl font-black text-slate-800 mb-2">${day.title}</h2>
                        <div class="flex flex-col sm:flex-row sm:items-center gap-3">
                            <p class="text-sm text-slate-500 font-medium">${day.subtitle}</p>
                             ${day.sunrise ? `
                                <div class="inline-flex items-center gap-3 text-xs font-semibold text-slate-500 bg-white px-3 py-1.5 rounded-full shadow-sm border border-slate-100 w-fit">
                                    <span class="flex items-center"><span class="text-orange-500 mr-1">ğŸŒ…</span>${day.sunrise}</span>
                                    <div class="h-3 w-[1px] bg-slate-300"></div>
                                    <span class="flex items-center"><span class="text-indigo-500 mr-1">ğŸŒ‡</span>${day.sunset}</span>
                                </div>
                            ` : ''}
                        </div>
                         ${day.jmaUrl ? `
                            <a href="${day.jmaUrl}" target="_blank" class="mt-3 inline-flex items-center text-xs font-bold text-sky-600 bg-sky-50 hover:bg-sky-100 px-3 py-1.5 rounded-full transition-colors border border-sky-100 w-fit">
                                ğŸŒ¤ï¸ å¤©æ°£é å ± (æ—¥æœ¬æ°£è±¡å»³)
                            </a>
                        ` : ''}
                         ${day.warning ? `
                            <div class="mt-4 bg-red-50 border-l-4 border-red-400 p-3 rounded-r-lg">
                                <p class="text-red-700 text-sm font-bold flex items-center">
                                    <svg class="w-4 h-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg>
                                    ${day.warning}
                                </p>
                            </div>
                        ` : ''}
                    </div>
                    <div class="relative pt-2 pl-2">
                        ${detailsHtml}
                    </div>
                    <div class="mt-8 bg-slate-100 rounded-xl p-5 border border-slate-200">
                        <h4 class="text-sm font-bold text-slate-400 uppercase tracking-wider mb-3">Day Summary</h4>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-y-2 gap-x-4 text-sm">
                            <div class="flex"><span class="w-12 text-slate-500 font-medium">æ—©é¤</span> <span class="text-slate-800 font-medium">${day.breakfast}</span></div>
                            <div class="flex"><span class="w-12 text-slate-500 font-medium">åˆé¤</span> <span class="text-slate-800 font-medium">${day.lunch}</span></div>
                            <div class="flex"><span class="w-12 text-slate-500 font-medium">æ™šé¤</span> <span class="text-slate-800 font-medium">${day.dinner}</span></div>
                            <div class="flex items-start"><span class="w-12 text-slate-500 font-medium flex-shrink-0">ä½å®¿</span> <span class="text-slate-800 font-bold text-sky-700">${day.lodging.replace(/\*\*/g, '')}</span></div>
                        </div>
                    </div>
                    <div class="h-12"></div>
                </div>
            `;
        }

        function initApp() {
            window.toggleCheck = toggleCheck;
            window.addEventListener('click', function(e) {
                if (e.target === document.getElementById('location-modal')) closeModal();
            });

            // åˆå§‹åŒ–æ¨™é¡Œ
            document.getElementById('header-title').textContent = `âœˆï¸ ${appItineraryData.meta.title}`;
            document.getElementById('header-subtitle').textContent = appItineraryData.meta.subtitle;

            renderMainTabs();
            renderDayTabs();
            switchMainView('home');
        }

        document.addEventListener('DOMContentLoaded', () => {
            initApp();
        });
    </script>
</body>
</html>